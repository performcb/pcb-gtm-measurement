___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "categories": [
    "AFFILIATE_MARKETING",
    "ADVERTISING"
  ],
  "securityGroups": [],
  "displayName": "PerformCB Measurement Tag",
  "brand": {
    "id": "brand_dummy",
    "displayName": "PerformCB",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "This tag supports both tracking clicks as well as conversions and events.\nYou must ensure that this tag is triggered on all possible landing pages, as well as at point of conversion and events.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "type",
    "displayName": "Tag Type",
    "radioItems": [
      {
        "value": "domain_tracking",
        "displayValue": "Universal Outcome Pixel"
      },
      {
        "value": "save_clickid",
        "displayValue": "Click Tracking",
        "help": "Should be triggered on every landing page or all pages on the site"
      },
      {
        "value": "main_conversion",
        "displayValue": "Main Conversion",
        "help": "Use for tracking the main conversion point"
      },
      {
        "value": "event_conversion",
        "displayValue": "Event Conversion",
        "help": "Use for tracking Events"
      }
    ],
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "click_group",
    "subParams": [
      {
        "type": "TEXT",
        "name": "clickid_source",
        "displayName": "ClickID query parameter from URL",
        "simpleValueType": true,
        "enablingConditions": [],
        "defaultValue": "clickid",
        "help": "If using redirect tracking, PerformCB will send clickid in the \u0026clickid\u003d parameter by default. For redirectless, this part will be ignored. \nDirect linking will be used if ClickID is not found in URL.",
        "alwaysInSummary": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "save_clickid",
        "type": "EQUALS"
      }
    ],
    "groupStyle": "NO_ZIPPY"
  },
  {
    "type": "GROUP",
    "name": "conv_shared_group",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "clickid",
        "displayName": "Click ID",
        "simpleValueType": true,
        "help": "(optional) The Clickid should be passed here. If you are using \"Click Tracking\", then you can leave this empty and it will automatically read the data from the cookie."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "main_conversion",
        "type": "EQUALS"
      },
      {
        "paramName": "type",
        "paramValue": "event_conversion",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "main_conv_group",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "pixel_group",
        "checkboxText": "Use Pixel group",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "offer_id",
        "displayName": "Offer ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NUMBER"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "pixel_group",
            "paramValue": false,
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "ogid",
        "displayName": "Pixel group ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NUMBER"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "pixel_group",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "main_conversion",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "event_conv_group",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "event_pixel_group",
        "checkboxText": "Use Event Pixel group",
        "simpleValueType": true
      },
      {
        "type": "CHECKBOX",
        "name": "main_pixel_group_use",
        "checkboxText": "Main offer conversion uses Pixel Group",
        "simpleValueType": true,
        "help": "Offer ID must be specified for Event if Offer Pixel Group is not used"
      },
      {
        "type": "TEXT",
        "name": "main_offer_id",
        "displayName": "Offer ID",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "main_pixel_group_use",
            "paramValue": false,
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          },
          {
            "type": "NUMBER"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "event_id",
        "displayName": "Event ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          },
          {
            "type": "NUMBER"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "event_pixel_group",
            "paramValue": false,
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "event_pixel_group_id",
        "displayName": "Event pixel group ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          },
          {
            "type": "NUMBER"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "event_pixel_group",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "event_conversion",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "conv_shared_group_2",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "transaction_id",
        "displayName": "Transaction ID",
        "simpleValueType": true,
        "help": "(optional) send your transaction ID for reference"
      },
      {
        "type": "TEXT",
        "name": "saleamount",
        "displayName": "Sale Amount",
        "simpleValueType": true,
        "help": "(optional) This is used for reporting only"
      },
      {
        "type": "TEXT",
        "name": "payout",
        "displayName": "Payout (for revshare offers only)",
        "simpleValueType": true,
        "help": "This is required only if the offer type is revshare"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "save_clickid",
        "type": "NOT_EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const injectScript = require('injectScript');
const getQueryParameters = require('getQueryParameters');
const callInWindow = require('callInWindow');
const setCookie = require('setCookie');
const encodeUriComponent = require('encodeUriComponent');
const injectIframe = require('injectHiddenIframe');
const getCookie = require('getCookieValues');

const leapClickIDLabel = 'pcb_click_id';
const dltScriptUrl = 'https://global.easysecurecdn.com/pcb-js/pcb-pixel.min.js';

let convUrl = 'https://cvrdomain.com/l/con'; 

const cookieOptions = {
  'domain': 'auto',
  'path': '/',
  'max-age': 60*60*24*30, 
  'secure': true,
  'samesite': 'None'
};

log('data: ', data);

if(data.type == 'save_clickid') {
  
  clickIdPersist();
  
} else if(data.type == 'main_conversion') {
  
  makeMainConversion();
  
} else if(data.type == 'event_conversion') {
  
  makeEventConversion();
  
} else if(data.type == 'domain_tracking') {
  
  pcbPixelTrack();
  
} else {
  
  onFailure();
  
}

function onSuccess() {
  data.gtmOnSuccess();
}

function onFailure() {
  data.gtmOnFailure();
}

function clickIdPersist() {
  if(data.clickid_source) {
    let clickid_from_source = getQueryParameters(data.clickid_source);
  
    if (clickid_from_source) {
      setCookie(leapClickIDLabel, clickid_from_source, cookieOptions);
      log('click_id: ', clickid_from_source);
      onSuccess();
    } else {
      injectScript(dltScriptUrl, onDltScriptSuccess, onFailure);
    }
  } else {
    injectScript(dltScriptUrl, onDltScriptSuccess, onFailure);
  }
}

function onDltScriptSuccess() {
  callInWindow("PCBpixel.click", loadDltClick);
  onSuccess();
}

function loadDltClick(clickid_dlt) {
  if(clickid_dlt) {
    setCookie(leapClickIDLabel, clickid_dlt, cookieOptions);
    log('click_id: ', clickid_dlt);
  } else {
    log('dlt click failed');
  }
}

function makeMainConversion()
{
  let clickid = getClickIdForConv();
  let url = convUrl + '?gtl=1&cbiframe=1';

  if(clickid) {
    url += '&clickid=' +  encodeUriComponent(clickid);
  }

  if(data.pixel_group) {
    if(data.ogid) {
      url += '&ogid=' + encodeUriComponent(data.ogid);
    }
  } else {
    if(data.offer_id) {
      url += '&oid=' + encodeUriComponent(data.offer_id);
    }
  }

  url = appendToConvUrl(url);

  log('main iframe url: ', url);
  injectIframe(url, onSuccess);
}

function makeEventConversion()
{
  let clickid = getClickIdForConv();
  
  if (data.event_id || data.event_pixel_group_id) {
    let url = convUrl + '?gtl=1&cbiframe=1';
    
    if(clickid) {
      url += '&clickid=' +  encodeUriComponent(clickid);
    }
    
    if( ! data.main_pixel_group_use) {
      url += '&oid=' + encodeUriComponent(data.main_offer_id);
    }
    
    if(data.event_pixel_group) {
      url += '&cbguid=' + encodeUriComponent(data.event_pixel_group_id);
    } else {
      url += '&cbuid=' + encodeUriComponent(data.event_id);
    }
    
    url = appendToConvUrl(url);
     
    log('event iframe url: ', url);
    injectIframe(url, onSuccess);
  } else {
    log("'event id/pixel group id' are required");
    onFailure();
  }
}

function getClickIdForConv()
{
  let clickid = null;
  
  if( ! data.clickid) {
    let leap_cookie = getCookie(leapClickIDLabel);
  
    if(leap_cookie[0]) {
      clickid = leap_cookie[0];
    }
  } else {
    clickid = data.clickid;
  }
  
  return clickid;
}

function appendToConvUrl(url)
{
  if(data.transaction_id) {
    url += '&cbtid=' + encodeUriComponent(data.transaction_id);
  }
    
  if(data.saleamount) {
    url += '&saleamount=' + encodeUriComponent(data.saleamount);
  }
    
  if(data.payout) {
    url += '&payout=' + encodeUriComponent(data.payout);
  }
  
  return url;
}

function pcbPixelTrack()
{
  injectScript(dltScriptUrl, onPcbPixelScriptSuccess, onFailure);
}

function onPcbPixelScriptSuccess() {
  let pcbData = {
    conv_data: {}
  };
  
  if(data.transaction_id) {
    pcbData.conv_data.cbtid = data.transaction_id;
  }
    
  if(data.saleamount) {
    pcbData.conv_data.saleamount = data.saleamount;
  }
    
  if(data.payout) {
    pcbData.conv_data.payout = data.payout;
  }
  
  //log('pcb_data: ', pcbData);
  
  callInWindow("PCBpixel.track", pcbData);
  onSuccess();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "PCBpixel.click"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "PCBpixel.track"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://global.easysecurecdn.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "pcb_click_id"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "pcb_click_id"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_hidden_iframe",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cvrdomain.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Updated on 04/25/2023

